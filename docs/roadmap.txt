SPQR II
=======

This is essentially the "how the game plays" document


Overall idea:
-------------

Player controls Rome
Game is turn-based
Map is region based
Goal: Create the best Empire


Turn Sequence
-------------

Player plays with cards
Player decides the budget spend for the turn
Player performs a series of military campaigns
Player can then shuffle Roman troops around the board
Player spends one more card
Next emperor is chosen
Year moves on 20 years. Loop back to start
Game ends when there no regions are controlled by the Roman player.


Overview
--------

Starting in 200 BC, you have 2 consuls and a small number of regions.

All regions have:
	Nodes a unit or city can be placed on
	Paths between the nodes and nodes in other regions
	Each node may hold up to 4 units
	A node may be a city

For each turn, any consul, emperor or general can conduct a certain (low) number of campaigns
A campaign is conducted this way:
	* A friendly region is chosen, and the leader moved there
	* First, you may Support:
		- The leader may choose to move ANY or ALL units from ONE or TWO NODES from anywhere on the board to their region
	* Then you may Prepare:
    
	** START LOOP! **

		- The leader can move, by one node, all the units in this region and all controlled adjacent ones
		- The leader must always be with a unit - the player can choose which one
	
	* Clicking an enemy region or unit will start an attack and declare war (makes the defender want to attack you).

	Enemies may move after any of your moves. They may prepare for your possible attack.
	You may or may not see this.

	* Combat is decided per unit vs unit immedietly after the move
	* For combat, the results could be:
        * Units move back to a unoccupied or friendly node. Nobody takes damage.
		* Units retreat to previous node. Both sides take some form of damage.
		* Units push into the node and cause the enemy units to move
		* No enemy units remain but the city is not taken
        * No enemy units remain and any city is captured
	* We repeat from "The leader can move"

	** END LOOP! **

	* The decision to end the loop is made by the player
	* Any further play needed after this will be performed by the AI, with a similar AI for Rome.
		- Careful running of the empire can improve this AI's performance - a major boost for a hard game

	* A certain amount of "fatigue" builds up every cycle, and units start to lose effeciency fairly quickly (on both sides)
		* The loop "The consul can move" might be thought of a campaign year passing. Depends on how many times that happens
        * Possible: Autumn arrives. Continuing will cost in GDP as crops are not brought in
                    Winter arrives. All units remain where they are. 
                        Unsupported units will die, supported units in unconqured regions (unless a city) cost some factor more
    * Campaigns cost money. They may make a profit, but they do always cost... and it should be expensive.
	* It is important to note the AI should be able to play between these moves (i.e., defend if obvious, attack if obvious, keep it simple)
	* A player can choose to wait between campaigns so they can react to enemy events with their own campaign
	* If they do, the wait costs a campaign. Emperors that have average or better strategy can wait once for free if they only have 1 campaign left.
        - The chance of an attack from enemy players after a wait is lower than normal.
    * If an enemy attacks, the player will gain a free campaign if they choose.
    	* This campaign will lack the single unit strategic move
    	* A well-paid and equipped army will make this campaign cheap, almost free if short and sucessful
    	* The flipside is that a badly prepared army might just collapse, with the emperor as well
    	* Often a better approach to to bide your time and attack during your campaign with better preperation
Once all campaigns are done, maybe the enemy chooses now to attack
If all campaigns are done, the player may choose to campaign an extra time at double or so the usual expense
    * And by "some expense" it should also reduce GDP as it represents a massive military spend
    * The spend is factored into the cost of the next emperor, i.e. the budget on the start of the turn will show the expense of the campaign
    * Essentially, it's free at the point of access, but possibly very damaging long term
Now cultural and city growth is done (TODO)
    - Need to express the cultural growth, not just as a number
    - So it needs something on the map, since that's what you always look at
        - Idea #1: (very hard): Music appears, and it gets more complex
        - Idea #2: (not too hard): Expressed in events, although that lacks the map aspect
        - Idea #3: (lots of assets): The images shown on the UI upgrade themselves
            - not the buttons, the event images, the pause screen image, that sort of thing
        - Idea #4: (really hard): Writers / Artists are shown doing jobs on the map
        - Idea #5: (needs assets): Add things to map, factories, ports etc...


At some point the "Empire" card is played, to remove the Republic
This always gives a civil war
In a civil war:
	You must beat the other rival(s)
	Unlimited campaigns but success begats success and you should steamroll (or lose fast)
	A civil war can happen at any time in the turn, but is most common at the start. The turn sequence should go:
		* An emperor is chosen in the normal way with rivals OR the emperor is challenged
		* Civil war is declared
		* All the rivals fight against each other
		* Player may choose which of the rivals they are
		* A non-stop campaign is held until there is a winner
		* It is more likely that a Roman army will "turn" rather than be defeated heavily
			- Thus, battles will likely have less casualties
		* The player now continues as the winner - which may be someone different
        * If you know you will lose, then obviously you would not fight
            - Ideas to prevent meta-gaming and trying to lose?
            	Winning adds to your score
            - Player may choose which rival they wish to play
            - In this case, they should have no say in who the rivals are

	Game is played as expected, except:
		The goal is to:
			A: Destroy all rivals
			B: Go to Rome
		For all participants:
			You can only rarely recruit new army members (if you beat an opponent)
			All Roman regions act as friendly to all Roman units, including Rome
			Moving to Rome gives a chance your rivals give up, especially if your army is much bigger
				* By "give up" we really mean "killed by the soldiers"
			No challenger will refuse a fight, typically they all march to Rome ASAP

In the Empire:
	On the first emperors turn, all cards removed and replaced with all good cards
	Only 1 emperor, and not 2 consuls, so war is harder
		- A later card allows an "East" and a "West" emperor, of course
	Tax revenue goes up - more to play with. This comes with more micro-management though.
	Forming new cities in new regions becomes harder


Scoring
-------

We need a score
Then we can also show "score over time" and "significant eras"
It also adds free tension to some decisions
We then can also add trophies
Score points:
	Survival
	Population
	Military victories
	Culture
	Romanisation
	Winning civil wars (? Surely "not having civil wars" scores higher?)
	Playing hard cards
	Playing era cards early
	Limiting saves (including perma-death)
	Adding deliberate bad luck via extra unlucky cards
	Starting with a lost Punic War
	Years of peace / monetary gain / no campaigns


Changing Emperors
-----------------

At the end of a turn, you may choose the next emperor / senators.
3 - 4 candidates are given (4 - 5 if senators, or split empire)
These people are randomly generated, although some will be marked as family members
Each candidate has a rough % chance that they will have no contender (Each?)
It should be possible (but rare - 1 or 2 times per playthrough) to keep the current Emperor (but not senators)
	In this case, there is no choice and the next turn continues
Likewise, it is possible (maybe quite common) to choose an heir
	- This just means selecting a family member, although there may be events in the turn before

Each candidate has a set of traits, varying from terrible to fantastic, some neutral.
Those traits will affect outcomes like:
	- Battles
	- Culture
	- Money
	- Romanisation
	- Maybe adds some random events

The only real extra gameplay mechanic is the bribes.
	Candidates may come with donatives.
	You can increase the % chance of success by giving a bigger donative.
	The more this is done, the more the donative must be
		- To the player this should be a question: is it worth it to do this?
			* So the money involved has to gamed in some way to be like 20% of spending next turn
		- A key method of crippling Rome is to leave it cashless as a succession
		  of Emperors spend all the money becoming emperor.
In general, the player should usually be able to choose what they want
	- The flipside is that they often only have a set of bad choices.
		- A key method of crippling Rome is to only have terrible choices
	- Key point is to have agency. Choosing the best of the worst is more fun, and sometimes a diamond can come along.
	- Agency is super-important. Just getting a 25% chance of choosing someone all the time is boring.
	- Thus the take-away is you should be able to certainly choose between 2-3 bad ones
	- You may select someone good, but they would have a low chance and possibly start a civil war
	- This doesn't mean all choices are objectivily bad, but it should be more common than you think
	- Being "good" in the players mind does NOT mean they will win any civil war though
	- So therefore the best we can do as a game is give 2/3 bad ones and 1 low chance good one, or similar
	- As long as we can diffrentiate the bad ones enough so they can be bad in one area but good in another
	- Then you can choose your poison, as it were - 
	- And you can really enjoy the actual good ones, of which there are few
	- A leader should give you some problem, but also some good thing
		(One mans good thing is another poison...)
	- It's how you use this that makes the game

If an emperor is selected who is truly awful (as decided by a set of metrics):
	- The game immediatly switches to a campaign
	- The Emperor starts in Rome and must defeat the other candidate
	- If the Emperor loses, they are replaced by the victor
	- This will reduce Roman troops if there are battles, and will cost money
	- If the emperor wins, the donative is paid; otherwise half is paid (or rather, lost)
	- The emperor can never campaign before enemies
		- Another key method of crippling Rome is starting every turn with a civil war

If an emperor is truly truly awful (but rarer than you'd like):
	- They are murdered by the people of Rome on turn start
	- You may choose the next emperor from some given candidates; they will be good
	- 90% of the donative will be returned

When the empire splits to East / West (card based):
	- 2 Emperors are chosen
	- Unlike senators, these emperors act only in their own area
	- Your votes are lopsided:
		- You may allocate votes to either East or West, but only one side.
			* I.e. if you have 3 votes (cards or skill) they cannot be split
			* To further detail, you can vote for ONE person only
			* You get an extra vote in the side you are Emperor of
		- This means one choice will be essentially random
		- Civil wars will be contained in their own areas (east or west)

Emperors can change in a turn due to civil war
	- The "total campaigns" of any emperor is against ALL the campaigns of the turn
	- So if you start with 4 and have 2 campaigns, and then we change to an emperor who should have with 3 campaigns, you only have 1 campaign left
	- The campaign for the civil war is a free campaign on both sides
	- Obviously a war with yourself is twice as costly as a normal war and damages only your territory
	- A "decent" (to be defined) Emperor may have the option to kill themselves, avoiding bloodshed


Generals
--------

Generals are characters who can campaign
They can be employed by emperors or the senate
Generals are dangerous, and may start civil wars or dictatorships
They may add campaigns and are generally better than random emperors


Hiding Information
------------------

Not all systems are transparent.
There are hidden stats that are never exposed, but sometimes expressed in player messages.
Maybe the stats are exposed and accumulation obscure, or the other way around
These are:
	Culture
		Writing			- Should be accumulative, starts at 0 and cards + cities + peace add to this (easy to get)
		Art 			- Should be accumulative, starts at 0 and cards + cities + peace add to this (hard to get)
	Natural World
		Engineering 	- Should be accumulative, starts at 0 and cards + cities + peace add to this (easy to get)
		Science 		- Should be accumulative, starts at 0 and cards + cities + peace add to this (very hard to get)
	Religion
		Christianity 	- Starts at zero and can go up and down (but not below zero)
			This stat triggers the "Christian Emperor" card
			Christianity is double-edged:
				* It means less tax revenue overall
				* Less romanisation
				* The first Christian emperor has more money (raids temples) and has an army with high morale
These stats effect your score at the end, so they are important.
To get the best scores should be hard, so no shame should be attached to low scores in one area.


Enemies
-------
	Enemy AI must have characteristics
		* I.e., barbarians act different in some way to Persians
			- maybe as simple as one raids, one invades
		* Might be cool to have defeats "revenged", i.e. recapture a legions colors
	They must move their units, build things, expand and decline like the player
		- Kept pretty simple, and mainly driven by progress
	Their leaders are like the player in the way they attack
	Although they don't really have cards, they may act like they do due to random events
	AI is fairly simple
		* Aggressive AI will attack if it looks possible, or raid if barbarian and defenses are low
		* Expansionist will do the same but stick around
		* Raiders will raid, and avoid combat (a city helps here)
		* Neutral AI will largly avoid attacking
		* Friendly AI (rare) is controlled by the player
		* They will generally ask for a truce if needed rather than risk destruction
		* The goal of the AI is never to "conquer Rome" it is generally to expand
	The troops:
		There should NOT be a kind of scissors, paper rock here, we do not want strategy everywhere
		As history progresses, horse mounted troops improve - by 400 AD they are essential
			* Change could be card based


Nodes
-----

Nodes are where units can move to.

Something with a value:
	Prefer to be influenced by the player
	Not excessive in the extreme values
	Represents something tangible

How do we change the stats below then? Do we need to?
What is the point of the region / node properties?
	Climate, crops and terrain effect food production
		- Can't change
	Money shows tax revenue (you can change tax rates)
		- Can change, but only by propertion
	Culture adds to the chance of random events
		- No real control
	Resources add to the economy simulation. They also add flavour.
		- No control (?)
	Cultural properties are cultural rewards.
		- No real control
	Buildings add specific details (port / mine) or just add flavour (collosseum)
		- Some control
	Romanisation + Happiness dictate how the population will react
		- Meta-control, have peace and food and we are good.

Each node has:
	A name
	A culture stat (gives culture)
	A money stat (gives money)
	A manpower stat
	Christian (hidden at start)
	Some resource properties:
		Gold / Silver / Iron / Wine / Cloth / Pottery / Fish / Grain
	Some cultural properties:
		Maths / Engineering / Writing / History / Music
	Some buildings:
		Temple / Mine / Port / Aquaduct / Colosseum
	We allow a maximum of 4/5 per node (based on how many we can display)
	A lot of nodes will start with zero properties
		TODO: How to set properties
	A romanisation stat
		aka, "how much do we like Rome"
	
Regions are the totals of these, plus:
	A name
	An indicator of climate, terrain and crop quality


Troops
------

	Troops have:
		attack
		defence
		morale
		quality (internal, expressed in attack and defence)
		number
	Fights are determined by:
		* Ratio of troops
		* Attack vs defence rating
		* Generals ratings
		* Luck


Units Per Node Breakdown
------------------------

Let us look at what we want:
	* A unit should be able to retreat to a node with a unit
	* Should be possible to attack with >1 unit in some way
	* The number and quality of troops must be visualised on the map
	* A unit should be able to move "through" a friendly unit
	* Must be easy to select and handle this

Ways to make this easy:
	Units are always shown as one model on the map
	This way all the current movement code works exactly as expected
	"One model" could be a model with 3 troops though
	Players can click the models (or the sidebar) to deselect troops
	There is a natural limit to the number of units per node (maybe 3?)
		- If a unit has to retreat to a node with 3 units, a random unit must move away first
		- This might have a chain reaction, but shouldn't be common
		- You cannot move into a node with 3 units
		- You can merge units on the sidebar
	After any battle, one of the sides must retreat somewhere


Cards:
------
	Player is given 6 cards at start of game
	They are divided into "good", "neutral" and "bad" cards which are mixed
	Two must be played at the start of a turn, and another at the end
		* For the start of the turn, player gets 1 card, then must play 2. Then they get another card
		* For the end, they get one and play one.
		* After playing cards at start or end, player may discard any good or neutral cards.
			- Some cards are auto played on discards. With awesome luck, sometimes a good card
		* For every 2 cards they discard (1 of which must be a good card), they may also discard 1 bad card
			- For this, they get back an equal number of new random cards
		* Some cards cannot be discarded
		 - The point of this is to "move history on" as it were
		 - So the player can put off these changes but then they have less cards to play with
		 - Possible card every 100 years:
		 	100 BC: Military reforms / more power to the people
		 	0 AD: Change to Emperor
		 	100 AD: Stagnation of Empire (growth is hard)
		 	200 AD: Rise of Persia
		 		- Almost a warning villian. They'll hit hard but generally go home
		 	300 AD: Rise of Germania
		 		- Hit hard and don't go home
		 	400 AD: Rise of the Huns
		 		- Hit hard and destroy everybodies homes
		 	500 AD: Seperation of the Churches of the East and West
		 - There needs to be some meta as to why a player would play these last 5
		 - So imagine it arrives in your hand. Only one, you'd never play it
		 	* So let's add a meta. The more you have of these cards, the more tension in the Empire
		 	* So having 1 is no big problem. 2 is an issue and 3 is a major issue
		 	* OR: add a bonus so each issue is mixed:
		 		100 BC: Is a bonus
		 		0 AD: Is mainly a bonus in that it stops civil wars
		 		100 AD: Improved civil service, better roads, GDP growth, even less civil wars
		 		200 AD: Armenia as ally. More money to be made by sacking.
		 		300 AD: Germanian allies cheap and good. Allows German generals (good)
		 		400 AD: Less in-fighting.
		 		500 AD: ???
		 	* OR: Takes up 2 cards
		 	* OR: Gets rid of bad cards when played
		 	* OR: Comes with random positive card
		 	* OR: The earlier you play the card, the higher your score

		* That's about 90 "natural" cards per game, they should and will be important

	After playing, another is picked up
	Card effects can change gameplay, eg:
		* Card: Leader has 1 extra campaign
	Or meta-gameplay
		* Card: When played, gain 2 random good cards which are played instantly
		* Card: Some effect + "this card may not be discarded"
	Or force game changes:
		* Card: Roman changes from Republic to Empire.
	Cards can have options, so that they may be multi-purpose
		* Card: Either event may happen:
			* Tacitus writes a famous history of Rome
			* You have +1 campaigns
		* Cards can fire events at some point, but are always played either at the start or end of the turn
			- For example, card "Choose your successor this turn":
			- Played at some point but only affects the "choose successor" round at the end of the turn.


Events:
-------

Events can trigger at any time.
They are a simple question that requires an answer.
Examples:
	Mistreated nobles want to claim the money confiscated by the previous emperor.
		A: Reject B: Pay 50% C: Pay all

	Enemy offers 20,000 talents of silver to withdraw from a region
		A: Reject B: Accept

On the programming side, it's like raising a simple dialog.
This means there needs to be some mechanism for this.


What do Roads do?
-----------------

Roads need a purpose. Ideas:
	* Roads faciltate a trade bonus
	* Troops move quicker, although you may not really notice that
	* If the troops moved under the prepare phase all use roads, the enemy will have no prepare phase, unless they also have roads.
	* In the support phase, you may move 2 units if their move is all along roads.
	* Retreat is a lot easier with roads
	* Increased romanization if connected to Rome
	* Roads add to the general score
	* They are expensive, best added by general romanization (but perhaps by then the effects are weakened?)
	* Most regions should have roads by 200, and the more far flung by 300 AD



What do Boats do?
-----------------

Boats / Ports need a purpose. Ideas:
	* Ports facilitate goods getting to Rome
	* Ships prevent piracy
	* Troops move quicker / easier


AI Hueristics
-------------

AI has rewards:
	Money FLOW, not always money OWNED
	Regions owned
	Population
	Cities

Large Scale (turn based):
	Decide what you want, i.e. prioritise from the above (maybe based on leader)
	Decide what possible actions there are. Such as:
		Raid / invade / destroy / sack an enemy region
		Invest in something internal - army, trade,
	From there, guess what the cost would be of those actions
	Now you should have a risk / reward kind of ratio

	Note: All interactions between 2 non-players is played as simple as possible, pratically random

Small scale:
	This is simply moving troops to achieve objectives
	There needs to be heuristics for every of combo of raid / sack / invade / destroy, but that's not too many
	There needs to be a "meta-AI" for deciding when to change strategy

Enemy AI for small scale:
	* On attacking, choose the purpose of the invade.
		1: Raid: Avoid combat and leave after stealing money
		2: Destroy enemy forces: Find the enemy forces and engage them, destroy them, grab any loot and go home (more loot than 1)
		3: Invade: Capture the region and the city (loot: not that much, you want to keep not destroy!)
		4: Sack: Capture the region and the city, steal everything, burn it all, and go home (this will gain a lot more money than 2)



How can we do an economy?
-------------------------

The simple truth is, we probably can't. But we can fake one.
An economy exists in game to enrich the players experience.
Therefore they should have a great deal of influence on it.
Ancient Rome ran on precious metals, a finite resource, so we need to "model" that.
Rome also used to debase coin regularly, this could be a choice of the player.
There were taxes raised, the money seems mainly spent on the army.

From a game perspective, we need:
	There is an integer value of the Empire's gold and silver assets.
	This is set at the start of the turn, after the emperor is chosen (i.e., the second thing to happen)
		- A screen showing the current finances of the empire
		- Same screen shows possible expenditure with some choices
			- Choices could be: Build a wall / Increase army size / Upgrade units / Improve roads
		- Once choices are made, money is spent and the player is left the rest of the money to spend in the turn
			- Possible spends are campaigns, events, sackings (lose money), ransom
	Money can almost always be borrowed. Any debts will carry over to the next emperor. Refusal to repay such debts is unwise.
	If it cannot be borrowed, it can be squeezed out of rich families. This is quicker way to meet an assasin than above.
	Ultimatly you can steal it from temples or churches. At this point everybody hates you. Unless they are Christian and you steal from temples.

What choices does the player have:
	1: What do I spend it on?
		- Higher spending on productive things is much better
		- Military spending has zero productivity
	2: How much do I spend?
		- Keeping gold in the economy is very important, and keeping a big reserve is generally a bad thing
		- You can always borrow, then the next emperor can borrow, and so on
	3: Player may buy an improvement in a node. Very expensive though, and nodes are limited to what they have.


Combat Screen Ideas
===================

