SPQR II
=======

This is essentially the "how the game plays" document


Overal idea:

Player controls Rome
Game is turn-based
Map is region based
Goal: Create the best Empire


Turn Sequence
-------------

Player plays with cards
Player decides the budget spend for the turn
Player performs a series of military campaigns
Player can then shuffle Roman troops around the board
Player spends one more card
Next emperor is chosen
Year moves on 20 years. Loop back to start
Game ends when there no regions are controlled by the Roman player.


Overview
--------

Starting in 200 BC, you have 2 consuls and a small number of regions.

All regions have:
	3 places a unit can be
	A possible city
	Paths between the places and other regions

For each turn, any consul, emperor or general can conduct a certain (low) number of campaigns
A campaign is conducted this way:
	* A friendly region is chosen, and the leader moved there
	* First, you may Support:
		- The leader may choose to move ONE unit from ONE region from anywhere on the board to their region
	* Then you may Prepare:
        - **A loop starts from here**
		- The leader can move, by one region (which may be >1 node), all the units in this region and all controlled adjacent ones
		- The leader must always be with a unit - the player can choose
	
	* Clicking an enemy region or unit will start an attack and declare war.

	Enemies may move after all of your moves. They may prepare for your possible attack.
	You may or may not see this.

	* On attacking, we add another element: the purpose of the invade. The player chooses a goal:
		1: Raid: Avoid combat and leave after stealing money
		2: Destroy enemy forces: Find the enemy forces and engage them, destroy them, grab any loot and go home (more loot than 1)
		3: Invade: Capture the region and the city (loot: not that much, you want to keep not destroy!)
		4: Sack: Capture the region and the city, steal everything, burn it all, and go home (this will gain a lot more money than 2)

	Enemy choices (and the player when you are invaded) and outcomes for 1-4 above:

		1: (Raid) Choice: Attack / Don't Attack
			First leads to battle on random number (i.e., you want to fight)
				* Enemy may simply run away at this point - option is given to player raiding, fails on random number
				* If failed runaway, battle engaged
				* Game: Choose a unit in the region to attack. If they run, you move and they move away
						If they do not move away (or unlucky), battle ensues
						Smart raider send 2 units in and retreat when threatened
			Second (or failed check) leads to losing money and enemy leaving
		2: (Destroy) Engage, or choose not to on a check
			If you try to engage, there is a guarenteed battle
			Not engage, needs a random check: fail is the battle
			Pass is move to a friendly region or battle if no move avaliable
			Game: Either move the unit to a different node or don't
				  If you don't, there must be a battle
				  If you do move, there's still a chance you have to fight
		3: (Invade) Engage or not as above.
			If you do not engage (checked), the attackers have a chance to attack the city
				If they win, they have the city. You may attack the city or retreat to another region.
				If they lose, you may attack on their retreat
			If you engage (or failed check), there is a battle. If the attackers win, they move on to attack the city.
		4: (Sack) Plays out as 3, except you have the extra option to withdraw:
			The attackers attack the city.
			If they lose, they go home
			If they win, they steal everything and go home
			You may not attack if they lose the city battle
			There is no check on a random meeting (so there's no chance you'll lose the army if the city isn't worth it)
            Game: Move all units in the region to another region
                - I suppose the other region could be non-friendly, like the Goths against Valens.


	* Combat is decided per unit vs unit, and the player can see the results of the 1st region attack before deciding on others
	* For combat, the results could be:
        * Units move back to a unoccupied or friendly node. Nobody takes damage.
		* Units retreat to previous node. Both sides take some form of damage.
		* Units push into the territory but enemy units remain
		* No enemy units remain but the city is not taken
        * No enemy units remain and any city is captured
	* We repeat from "The consul can move"
    ** END LOOP! **

	* A certain amount of "fatigue" builds up every cycle, and units start to lose effeciency fairly quickly (on both sides)
		* The loop "The consul can move" might be thought of a campaign year passing. Depends on how many times that happens
        * Possible: Autumn arrives. Continuing will cost in GDP as crops are not brought in
                    Winter arrives. All units remain where they. 
                        Unsupported units will die, supported units in unconqured regions (unless a city) cost some factor more
    * Campaigns cost money. They may make money, but they do always cost... and it should be expensive in some way.
	* It is important to note the AI should be able to play between these moves (i.e., defend if obvious, attack if obvious, keep it simple)
	* A player can choose to "wait" between campaigns so they can react to enemy events
	* If they do, the wait costs a campaign. Emperors that have average or better strategy can wait once for free if they only have 1 campaign left.
        - The chance of an event after a wait is very low
Once all campaigns are done, maybe the enemy chooses now to attack
If all campaigns are done, the player may choose to campaign an extra time at double the usual expense
    * And by "some expense" it should also reduce GDP as it represents a massive military spend
    * Essentially, it's free at the point of access, but possibly very damaging long term
Now cultural and city growth is done (TODO)
    - Need to express the cultural growth, not just as a number
    - So it needs something on the map, since that's what you always look at
        - Idea #1: (very hard): Music appears, and it gets more complex
        - Idea #2: (not too hard): Expressed in events, although that lacks the map aspect
        - Idea #3: (lots of assets): The images shown on the UI upgrade themselves
            - not the buttons, the event images, the pause screen image, that sort of thing
        - Idea #4: (really hard): Writers / Artists are shown doing jobs on the map


At some point the "Empire" card is played, to remove the Republic
This always give a civil war
In a civil war:
	You must beat the other rival(s)
	Unlimited campaigns but success begats success and you should steamroll (or lose fast)
	A civil war can happen at any time in the turn, but is most common at the start. The turn sequence should go:
		* An emperor is chosen in the normal way with rivals OR the emperor is challenged
		* Civil war is declared
		* All the rivals fight
		* Player must be the de jure emperor
		* A non-stop campaign is held until there is a winner
		* It is more likely that a Roman army will "turn" rather than be defeated heavily
			- Thus, battles will likely have less casualties
		* The player now continues as the winner - which may be someone different
        * If you know you will lose, then obviously you would not fight
            - Ideas to prevent meta-gaming and trying to lose?

Game is played as expected, except:
	The goal is to:
		A: Destroy all rivals
		B: Go to Rome
	For all participants:
		You can only rarely recruit new army members (if you beat an opponent)
		All Roman regions are friendly, including Rome
		Moving to Rome gives a chance your rivals give up, especially if your army is much bigger
			* By "give up" we likely mean "killed by the soldiers"
		No challenger will want to not accept a fight, typically they all march to Rome ASAP

In the Empire:
	On the first emperors turn, all cards removed and replaced with all good cards
	Only 1 emperor, and not 2 consuls, so war is harder
		- A later card allows an "East" and a "West" emperor, of course
	Tax revenue goes up - more to play with. This comes with more micro-management though.
	Forming new cities in new regions becomes harder


Changing Emperors
-----------------

At the end of a turn, you may choose the next emperor / senators.
3 - 4 candidates are given (4 - 5 if senators, or split empire)
They are chosen from these people:
	A family member (if good % chance is met)
		You may have an event to choose this person, or choose no family member
	Random others
It should be possible (but rare - 1/2 time per playthrough) to keep the current Emperor (but not senators)
	In this case, there is no choice and the next turn continues
Likewise, it is possible (maybe quite common) to choose an heir
	- To the player, this will be a random character in the main
		* This character already gets a vote from "family connections" so they are in the running by default
	- So the reasons to choose this random character:
		* Lower donative
		* Less chance of immediate civil war
	- And against:
		* Other candidates likely better
Each candidate has a set of traits, varying from terrible to fantastic, some neutral.
Those traits will affect outcomes like:
	- Battles
	- Culture
	- Money
	- Romanisation
	- Maybe adds some random events
The outcome is not always what the player wants. They have a vote (maybe ++). The other votes are based on traits:
	+ for popular / loved
	- for unloved / hated
	+ for ambitious
	+ for family connections
	- for peaceful
	+ for bribes
As can be seen, a popular, ambitious family member who bribes is a likely winner

The only real extra gameplay mechanic is the bribes.
	Low level bribes result in the loss of money when they become leaders.
	With Emperors, slowly the donative to the troops will become larger and larger.
	If a candidate is winning with their donative, you may choose to pay more for your candidate
		- To the player this should be a question: is it worth it to do this?
			* So the money involved has to gamed in some way to be like 20% of spending next turn
		- A key method of crippling Rome is to leave it cashless as a succession
		  of Emperors spend all the money becoming emperor.
In general, the player should usually be able to choose what they want
	- The flipside is that they often only have a set of bad choices.
		- A key method of crippling Rome is to only have terrible choices
	- Key point is to have agency. Choosing the best of the worst is more fun, and sometimes a diamond can come along.

If an emperor is selected who is truly awful (as decided by a set of metrics):
	- The game immediatly switches to a campaign
	- The Emperor starts in Rome and must defeat the other candidate
	- If the Emperor loses, they are replaced by the victor
	- This will reduce Roman troops if there are battles, and will cost money
	- If the emperor wins, the donative is paid; otherwise half is paid (or rather, lost)
	- The emperor can never campaign before enemies
		- Another key method of crippling Rome is starting every turn with a civil war

If an emperor is truly truly awful:
	- They are murdered by the people of Rome on turn start
	- You may choose the next emperor from some given candidates; they will be good
	- 90% of the donative will be returned

When the empire splits to East / West (card based):
	- 2 Emperors are chosen
	- Unlike senators, these emperors act only in their own area
	- Your votes are lopsided:
		- You may allocate votes to either East or West, but only one side.
			* I.e. if you have 3 votes (cards or skill) they cannot be split
			* To further detail, you can vote for ONE person only
			* You get an extra vote in the side you are Emperor of
		- This means one choice will be essentially random
		- Civil wars will be contained in their own areas (east or west)

Emperors can change in a turn due to civil war
	- The "total campaigns" of any emperor is against ALL the campaigns of the turn
	- So if you start with 4 and have 2 campaigns, and then we change to an emperor who should have with 3 campaigns, you only have 1 campaign left
	- The campaign for the civil war is a free campaign on both sides
	- Obviously a war with yourself is twice as costly as a normal war and damages only your territory
	- A "decent" (to be defined) Emperor may have the option to kill themselves, avoiding bloodshed


Generals
--------

Generals are characters who can campaign
They can be employed by emperors or the senate
Generals are dangerous, and may start civil wars or dictatorships
They add campaigns and are generally better than random emperors


Hiding Information
------------------

Not all systems are transparent.
There are hidden stats that are never exposed, but sometimes expressed in player messages.
Maybe the stats are exposed and accumulation obscure, or the other way around
These are:
	Culture
		Writing			- Should be accumulative, starts at 0 and cards + cities + peace add to this (easy to get)
		Art 			- Should be accumulative, starts at 0 and cards + cities + peace add to this (hard to get)
	Natural World
		Engineering 	- Should be accumulative, starts at 0 and cards + cities + peace add to this (easy to get)
		Science 		- Should be accumulative, starts at 0 and cards + cities + peace add to this (very hard to get)
	Religion
		Christianity 	- Starts at zero and can go up and down (but not below zero)
			This stat triggers the "Christian Emperor" card
			Christianity is double-edged:
				* It means less tax revenue overall
				* Less romanisation
				* The first Christian emperor has more money (raids temples) and has an army with high morale
		Roman Gods		- Starts at some value and can fluctuate (especially if you add a new region)
			- Whats the point of this stat?
These stats effect your score at the end, so they are important.
To get the best scores should be hard, so no shame should be attached to low scores in one area.


Enemies
-------
	Enemy AI must have characteristics
		* I.e., barbarians act different in some way to Persians
			- maybe as simple as one raids, one invades
	They must move their units, build things, expand and decline like the player
		- Kept pretty simple, and mainly driven by progress
	Their leaders are like the player in the way they attack
	Although they don't really have cards, they may act like they do due to random events
	AI is fairly simple
		* Aggressive AI will attack if it looks possible, or raid if barbarian and defenses are low
		* Expansionist will do the same but stick around
		* Raiders will raid, and avoid combat (a city helps here)
		* Neutral AI will largly avoid attacking
		* Friendly AI (rare) is controlled by the player
		* They will generally ask for a truce if needed rather than risk destruction
	The troops:
		There should NOT be a kind of scissors, paper rock here, we do not want strategy everywhere
		As history progresses, horse mounted troops improve - by 400 AD they are essential
			* Change could be card based


Regions
-------

Each region has:
	A major city
	A culture stat (gives culture)
	A money stat (gives money)
	A manpower stat
	A "loyalty to the emperor" stat (?)
	An indicator of basic terrain type


Troops
------

	Troops have an attack and defence
	Fights are determined by:
		* Ratio of troops
		* Attack vs defence rating
		* Generals ratings
		* Luck

Cards:
------
	Player is given 6 cards at start of game
	They are divided into "good", "neutral" and "bad" cards which are mixed
	Two must be played at the start of a turn, and another at the end
		* For the start of the turn, player gets 1 card, then must play 2. Then they get another card
		* For the end, they get one and play one.
		* After playing cards at start or end, player may discard any good or neutral cards.
			- Some cards are auto played on discards. With awesome luck, sometimes a good card
		* For every 2 cards they discard (1 of which must be a good card), they may also discard 1 bad card
			- For this, they get back an equal number of new random cards
		* Some cards cannot be discarded
		 - The point of this is to "move history on" as it were
		 - So the player can put off these changes but then they have less cards to play with
		 - Possible card every 100 years:
		 	100 BC: Military reforms / more power to the people
		 	0 AD: Change to Emperor
		 	100 AD: Stagnation of Empire (growth is hard)
		 	200 AD: Rise of Persia
		 		- Almost a warning villian. They'll hit hard but generally go home
		 	300 AD: Rise of Germania
		 		- Hit hard and don't go home
		 	400 AD: Rise of the Huns
		 		- Hit hard and destroy everybodies homes
		 	500 AD: ???
		 - There needs to be some meta as to why a player would play these last 5
		 - So imagine it arrives in your hand. Only one, you'd never play it
		 	* So let's add a meta. The more you have of these cards, the more tension in the Empire
		 	* So having 1 is no big problem. 2 is an issue and 3 is a major issue
		 	* OR: add a bonus so each issue is mixed:
		 		100 BC: Is a bonus
		 		0 AD: Is mainly a bonus in that it stops civil wars
		 		100 AD: Improved civil service, better roads, GDP growth, even less civil wars
		 		200 AD: Armenia as ally. More money to be made by sacking.
		 		300 AD: Germanian allies cheap and good. Allows German generals (good)
		 		400 AD: Less in-fighting.
		 		500 AD: ???
		 	* OR: Takes up 2 cards
		 	* OR: Gets rid of bad cards when played
		 	* OR: Comes with random positive card

		* Thats about 90 "natural" cards per game, they should and will be important

	After playing, another is picked up
	Card effects can change gameplay, eg:
		* Card: Leader has 1 extra campaign
	Or meta-gameplay
		* Card: When played, gain 2 random good cards which are played instantly
		* Card: Some effect + "this card may not be discarded"
	Or force game changes:
		* Card: Roman changes from Republic to Empire.
	Cards can have options, so that they may be multi-purpose
		* Card: Either event may happen:
			* Tacitus writes a famous history of Rome
			* You have +1 campaigns
		* When played, raises an event


Events:
-------

Events can trigger at any time.
They are a simple question that requires an answer.
Examples:
	Mistreated nobles want to claim the money confiscated by the previous emperor.
		A: Reject B: Pay 50% C: Pay all

	Enemy offers 20,000 talents of silver to withdraw from a region
		A: Reject B: Accept

On the programming side, it's like raising a simple dialog.
This means there needs to be some mechanism for this.


What do Roads do?
-----------------

Roads need a purpose. Ideas:
	* Roads faciltate a trade bonus
	* Troops move quicker, although you may not really notice that
	* If the troops moved under the prepare phase all use roads, the enemy will have no prepare phase, unless they also have roads.
	* In the support phase, you may move 2 units if their move is all along roads.
	* Retreat is a lot easier with roads
	* Increased romanization if connected to Rome
	* Roads add to the general score
	* They are expensive, best added by general romanization (but perhaps by then the effects are weakened?)
	* Most regions should have roads by 200, and the more far flung by 300 AD


What do Boats do?
-----------------

Boats / Ports need a purpose. Ideas:
	* Ports facilitate goods getting to Rome
	* Ships prevent piracy
	* Troops move quicker / easier


AI Hueristics
-------------

AI has rewards:
	Money
	Regions owned
	Population
	Cities

Large Scale (turn based):
	Decide what you want, i.e. prioritise from the above (maybe based on leader)
	Decide what possible actions there are. Such as:
		Raid / invade / destroy / sack an enemy region
		Invest in something internal - army, trade,
	From there, guess what the cost would be of those actions
	Now you should have a risk / reward kind of ratio

	Note: All interactions between 2 non-players is played as simple as possible, pratically random

Small scale:
	This is simply moving troops to achieve objectives
	There needs to be heuristics for every of combo of raid / sack / invade / destroy, but that's not too many
	There needs to be a "meta-AI" for deciding when to change strategy
